<html lang="en">
  <head>
    <title>Automating searching different locations in Facebook Marketplace - Tom Lynch</title>
    <link rel="stylesheet" href="/css/foundation.css">
    <link rel="stylesheet" href="/css/fa_icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism-okaidia.css" rel="stylesheet">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-179723365-1"></script>
    
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-179723365-1');
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

  </head>
  <body>
    
<div class="menu">
	<ul>
		
		
			<li><a href="/">Home</a></li>
		
			<li><a href="/about/">About</a></li>
		
			<li><a href="/blog/">Blog</a></li>
		
			<li><a href="/research/">Research</a></li>
		
			<li><a href="/subscribe/">Subscribe</a></li>
		
			<li><a href="/contact/">Contact</a></li>
		
	</ul>
</div>


<article>
<h1 class="posttitle">Automating searching different locations in Facebook Marketplace</h1>
<author>
    <a href="/about">Tom Lynch</a>
</author>
<div class="date">
    <time>22 Apr 2021</time>
</div>
<p>DASAs</p>
<pre class="language-apl"><code class="language-apl"><span class="token comment"># --------------------------------------------------------------------------</span><br><span class="token comment"># ------------- SETTINGS THAT MAY BE CHANGED ---------------------</span><br><span class="token comment"># --------------------------------------------------------------------------</span><br><br>set preset_search_terms to "cyclocross<span class="token function">,</span> cx bike<span class="token function">,</span> gravel bike<span class="token function">,</span> crux<span class="token function">,</span> tcx<span class="token function">,</span> focus mares<span class="token function">,</span> topstone<span class="token function">,</span> superx<span class="token function">,</span> cannondale slate<span class="token function">,</span> revolt<span class="token function">,</span> jake the snake<span class="token function">,</span> x fire<span class="token function">,</span> boone<span class="token function">,</span> sram cranks<span class="token function">,</span> sram crankset<span class="token function">,</span> chainrings<span class="token function">,</span> <span class="token number">52</span><span class="token function">-</span><span class="token number">36</span><span class="token function">,</span> <span class="token number">50</span><span class="token function">-</span><span class="token number">34</span><span class="token function">,</span> northwave <span class="token number">44</span><span class="token function">,</span> adidas <span class="token number">10</span><span class="token function">,</span> reebok <span class="token number">10</span>"<br><br>set browser to "Firefox"<br><span class="token comment"># set browser to "Google Chrome"</span><br><br>set default_days to "<span class="token number">1</span>"<br><br><span class="token comment"># --------------------------------------------------------------------------</span><br><span class="token comment"># --------- CODE THAT RUNS THE THING ----- DON'T TOUCH --------</span><br><span class="token comment"># --------------------------------------------------------------------------</span><br><br>on replace_chars<span class="token punctuation">(</span>this_text<span class="token function">,</span> search_string<span class="token function">,</span> replacement_string<span class="token punctuation">)</span><br>	set AppleScript's text item delimiters to the search_string<br>	set the item_list to every text item of this_text<br>	set AppleScript's text item delimiters to the replacement_string<br>	set this_text to the item_list as string<br>	set AppleScript's text item delimiters to ""<br>	return this_text<br>end replace_chars<br><br><br>set search_terms_input_string to display dialog "What do you want to search for<span class="token function">?</span>" default answer preset_search_terms<br>set search_terms_string to text returned of search_terms_input_string<br><br>set AppleScript's text item delimiters to "<span class="token function">,</span> "<br>set the search_terms_list to every text item of the search_terms_string<br>set AppleScript's text item delimiters to ""<br><br><br>set params to "<span class="token function">?</span>"<br><br>set max_price_input to display dialog "Whats the max price to search for <span class="token punctuation">(</span>blank for no max<span class="token punctuation">)</span><span class="token function">?</span>" default answer ""<br>set max_price to text returned of max_price_input<br><br>if <span class="token punctuation">(</span>max_price<span class="token punctuation">)</span> <span class="token function">≠</span> "" then set params to params <span class="token monadic-operator operator">&amp;</span> "maxPrice<span class="token function">=</span>" <span class="token monadic-operator operator">&amp;</span> max_price <span class="token monadic-operator operator">&amp;</span> "<span class="token monadic-operator operator">&amp;</span>"<br><br>set num_days_input to display dialog "How many days since posted do you want to check <span class="token punctuation">(</span>blank for all dates<span class="token punctuation">)</span><span class="token function">?</span>" default answer default_days<br>set num_days to text returned of num_days_input<br><br>if <span class="token punctuation">(</span>num_days<span class="token punctuation">)</span> <span class="token function">≠</span> "" then set params to params <span class="token monadic-operator operator">&amp;</span> "daysSinceListed<span class="token function">=</span>" <span class="token monadic-operator operator">&amp;</span> num_days <span class="token monadic-operator operator">&amp;</span> "<span class="token monadic-operator operator">&amp;</span>"<br><br>set capitals_only_input to display dialog "Skip Hobart<span class="token function">,</span> Alice Springs and Darwin<span class="token function">?</span> <span class="token punctuation">(</span>so only do Adelaide<span class="token function">,</span> Perth<span class="token function">,</span> Townsville<span class="token function">,</span> Brisbane<span class="token function">,</span> Sydney<span class="token function">,</span> Melbourne<span class="token punctuation">)</span>" default answer "yes"<br>set capitals_only to text returned of capitals_only_input<br><br>set search_urls to <span class="token dfn builtin">{</span>"https<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span><span class="token monadic-operator operator">/</span>www<span class="token dyadic-operator operator">.</span>facebook<span class="token dyadic-operator operator">.</span>com<span class="token monadic-operator operator">/</span>marketplace<span class="token monadic-operator operator">/</span>adelaide<span class="token monadic-operator operator">/</span>search"<span class="token function">,</span> "https<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span><span class="token monadic-operator operator">/</span>www<span class="token dyadic-operator operator">.</span>facebook<span class="token dyadic-operator operator">.</span>com<span class="token monadic-operator operator">/</span>marketplace<span class="token monadic-operator operator">/</span>perth<span class="token monadic-operator operator">/</span>search"<span class="token function">,</span> "https<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span><span class="token monadic-operator operator">/</span>www<span class="token dyadic-operator operator">.</span>facebook<span class="token dyadic-operator operator">.</span>com<span class="token monadic-operator operator">/</span>marketplace<span class="token monadic-operator operator">/</span><span class="token number">109177059102294</span><span class="token monadic-operator operator">/</span>search"<span class="token function">,</span> "https<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span><span class="token monadic-operator operator">/</span>www<span class="token dyadic-operator operator">.</span>facebook<span class="token dyadic-operator operator">.</span>com<span class="token monadic-operator operator">/</span>marketplace<span class="token monadic-operator operator">/</span>brisbane<span class="token monadic-operator operator">/</span>search"<span class="token function">,</span> "https<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span><span class="token monadic-operator operator">/</span>www<span class="token dyadic-operator operator">.</span>facebook<span class="token dyadic-operator operator">.</span>com<span class="token monadic-operator operator">/</span>marketplace<span class="token monadic-operator operator">/</span>sydney<span class="token monadic-operator operator">/</span>search"<span class="token function">,</span> "https<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span><span class="token monadic-operator operator">/</span>www<span class="token dyadic-operator operator">.</span>facebook<span class="token dyadic-operator operator">.</span>com<span class="token monadic-operator operator">/</span>marketplace<span class="token monadic-operator operator">/</span>melbourne<span class="token monadic-operator operator">/</span>search"<span class="token dfn builtin">}</span><br><br>if <span class="token punctuation">(</span>capitals_only<span class="token punctuation">)</span> <span class="token function">≠</span> "yes" then set search_urls to <span class="token dfn builtin">{</span>"https<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span><span class="token monadic-operator operator">/</span>www<span class="token dyadic-operator operator">.</span>facebook<span class="token dyadic-operator operator">.</span>com<span class="token monadic-operator operator">/</span>marketplace<span class="token monadic-operator operator">/</span><span class="token number">111652435519898</span><span class="token monadic-operator operator">/</span>search"<span class="token function">,</span> "https<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span><span class="token monadic-operator operator">/</span>www<span class="token dyadic-operator operator">.</span>facebook<span class="token dyadic-operator operator">.</span>com<span class="token monadic-operator operator">/</span>marketplace<span class="token monadic-operator operator">/</span>adelaide<span class="token monadic-operator operator">/</span>search"<span class="token function">,</span> "https<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span><span class="token monadic-operator operator">/</span>www<span class="token dyadic-operator operator">.</span>facebook<span class="token dyadic-operator operator">.</span>com<span class="token monadic-operator operator">/</span>marketplace<span class="token monadic-operator operator">/</span>perth<span class="token monadic-operator operator">/</span>search"<span class="token function">,</span> "https<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span><span class="token monadic-operator operator">/</span>www<span class="token dyadic-operator operator">.</span>facebook<span class="token dyadic-operator operator">.</span>com<span class="token monadic-operator operator">/</span>marketplace<span class="token monadic-operator operator">/</span><span class="token number">108143959213846</span><span class="token monadic-operator operator">/</span>search"<span class="token function">,</span> "https<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span><span class="token monadic-operator operator">/</span>www<span class="token dyadic-operator operator">.</span>facebook<span class="token dyadic-operator operator">.</span>com<span class="token monadic-operator operator">/</span>marketplace<span class="token monadic-operator operator">/</span><span class="token number">107929299235881</span><span class="token monadic-operator operator">/</span>search"<span class="token function">,</span> "https<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span><span class="token monadic-operator operator">/</span>www<span class="token dyadic-operator operator">.</span>facebook<span class="token dyadic-operator operator">.</span>com<span class="token monadic-operator operator">/</span>marketplace<span class="token monadic-operator operator">/</span><span class="token number">109177059102294</span><span class="token monadic-operator operator">/</span>search"<span class="token function">,</span> "https<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span><span class="token monadic-operator operator">/</span>www<span class="token dyadic-operator operator">.</span>facebook<span class="token dyadic-operator operator">.</span>com<span class="token monadic-operator operator">/</span>marketplace<span class="token monadic-operator operator">/</span>brisbane<span class="token monadic-operator operator">/</span>search"<span class="token function">,</span> "https<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span><span class="token monadic-operator operator">/</span>www<span class="token dyadic-operator operator">.</span>facebook<span class="token dyadic-operator operator">.</span>com<span class="token monadic-operator operator">/</span>marketplace<span class="token monadic-operator operator">/</span>sydney<span class="token monadic-operator operator">/</span>search"<span class="token function">,</span> "https<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span><span class="token monadic-operator operator">/</span>www<span class="token dyadic-operator operator">.</span>facebook<span class="token dyadic-operator operator">.</span>com<span class="token monadic-operator operator">/</span>marketplace<span class="token monadic-operator operator">/</span>melbourne<span class="token monadic-operator operator">/</span>search"<span class="token dfn builtin">}</span><br>if <span class="token punctuation">(</span>capitals_only<span class="token punctuation">)</span> <span class="token function">=</span> "melb" then set search_urls to <span class="token dfn builtin">{</span>"https<span class="token dfn builtin">:</span><span class="token monadic-operator operator">/</span><span class="token monadic-operator operator">/</span>www<span class="token dyadic-operator operator">.</span>facebook<span class="token dyadic-operator operator">.</span>com<span class="token monadic-operator operator">/</span>marketplace<span class="token monadic-operator operator">/</span>melbourne<span class="token monadic-operator operator">/</span>search"<span class="token dfn builtin">}</span><br>with timeout of <span class="token number">3600</span> seconds<br>	<br>	repeat with search_term in search_terms_list<br>		set theDialogText to "Click Continue to proceed to the search for <span class="token string">'" &amp; search_term &amp; "'</span>"<br>		with timeout of <span class="token number">3600</span> seconds<br>			display dialog theDialogText buttons <span class="token dfn builtin">{</span>"End"<span class="token function">,</span> "Skip"<span class="token function">,</span> "Continue"<span class="token dfn builtin">}</span> default button "Continue" cancel button "End"<br>		end timeout<br>		repeat <span class="token number">1</span> times<br>			if the button returned of the result is "Skip" then exit repeat<br>			repeat with location_url in search_urls<br>				set this_url to replace_chars<span class="token punctuation">(</span>location_url <span class="token monadic-operator operator">&amp;</span> params <span class="token monadic-operator operator">&amp;</span> "query<span class="token function">=</span>" <span class="token monadic-operator operator">&amp;</span> search_term<span class="token function">,</span> " "<span class="token function">,</span> "%<span class="token number">20</span>"<span class="token punctuation">)</span><br>				tell application browser<br>					activate<br>					open location this_url<br>				end tell<br>				delay <span class="token number">0.1</span><br>			end repeat<br>		end repeat<br>	end repeat<br>end timeout<br>with timeout of <span class="token number">3600</span> seconds<br>	display alert "Searches complete"<br>end timeout<br></code></pre>

</article>
  </body>
</html>



